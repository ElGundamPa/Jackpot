// src/config/agents.config.ts
// Archivo de configuraci贸n centralizada para fotos, 铆conos, temas Y CANCIONES

export const AGENT_PHOTOS: Record<string, string> = {
  "Anny Martinez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Anny.png?alt=media&token=46464a58-dbec-4d92-b493-dcd3e14f4e6c",
  "Daniel Salazar": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Daniel.png?alt=media&token=78a6e656-fe19-4ddb-9d96-fb94a74498de",
  "Isaac Fernandez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Isaac.png?alt=media&token=18025259-6e89-4bca-b8d9-bf379b218271",
  "Luisa Gutierrez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Luisa.png?alt=media&token=19ed0653-b59f-477c-9387-f01b2c222ce7",
  "Wilder Zapata": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/wilder.png?alt=media&token=569a931b-28f8-4737-aab5-c83f12e4d8dc",
  "Isadora Cruz": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/isadora.png?alt=media&token=48ba529d-2a30-43bd-b4ce-29bf2d98c324",
  "Giann Carlos": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Gian.png?alt=media&token=51df6c57-dd5f-44e3-b5d6-dc181476d6cc",
  "Ismael Lopez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/isma.png?alt=media&token=0454e475-f135-478a-972c-084f984f7205",
  "Juan de Dios": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Juan.png?alt=media&token=ef476ab5-91ff-46fd-ac5c-2d864dc312b9",
  "Mariano Campuzano": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Mariano.png?alt=media&token=063d83ab-30d6-43a7-b009-00e3fafc4a11",
  "Maylo Villalobos": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/maylo.png?alt=media&token=32a5cff3-86a6-4aa6-8660-981839949286",
  "Guadalupe Gonzalez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Guada.png?alt=media&token=ecd9b439-bda4-40d8-88f8-18bbe3fd116d",
  "Amelia Huaman": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/amelia.png?alt=media&token=f49312b7-2bbc-416b-880d-797cb5876d17",
  "Heiner Ramirez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Heiner.png?alt=media&token=3572ba43-81a4-4e2e-933b-6e5a06b02ac0",
  "Leomelly Alvarez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/leo.png?alt=media&token=bd30e2ad-61c5-4b2f-8ad1-9f0130c96159",
  "Samanta Rous": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Sama.png?alt=media&token=3eb64230-e132-4b25-8c7a-f8de3f3b6314",
  "Emanuel Garcia": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Ema.png?alt=media&token=dc22751c-510a-45fa-9590-aaf9da665943",
  "Camila Hernandez": "/imagenes/Camila%20Hernandez.png"
};

// ==========  CANCIONES DE CELEBRACIN (30 segundos cada una) ==========
export const AGENT_CELEBRATION_SONGS: Record<string, string> = {
  // Mesa 1 - Nicol谩s (orden correcto: Camila Hernandez, Isaac Fernandez, Daniel Salazar, Leonel Cruz, Emanuel Garcia, Luisa Gutierrez, Wilder Zapata)
  "Camila Hernandez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMDaniel.mp3?alt=media&token=7d8f0c1d-43a4-4086-ab3e-8277f612ca65",
  "Isaac Fernandez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMDaniel.mp3?alt=media&token=7d8f0c1d-43a4-4086-ab3e-8277f612ca65",
  "Daniel Salazar": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMDaniel.mp3?alt=media&token=7d8f0c1d-43a4-4086-ab3e-8277f612ca65",
  "Emanuel Garcia": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMEmanuel.mp3?alt=media&token=400d7d2c-4e82-451c-911e-9250500ff15c",
  "Luisa Gutierrez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMDaniel.mp3?alt=media&token=7d8f0c1d-43a4-4086-ab3e-8277f612ca65",
  "Wilder Zapata": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMDaniel.mp3?alt=media&token=7d8f0c1d-43a4-4086-ab3e-8277f612ca65",
  
  // Mesa 2 - Enzo (orden correcto: Juan de Dios, Isadora Cruz, Ismael Lopez, Anny Martinez, Giann Carlos, Mariano Campuzano, Maylo Villalobos)
  "Juan de Dios": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMjuand.mp3?alt=media&token=e428e85a-6b72-4d19-be40-03f6f31b583d",
  "Isadora Cruz": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMDaniel.mp3?alt=media&token=7d8f0c1d-43a4-4086-ab3e-8277f612ca65",
  "Ismael Lopez": "https://assets.mixkit.co/active_storage/sfx/1934/1934-preview.mp3",
  "Anny Martinez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMAnny.mp3?alt=media&token=c286f102-b058-4449-a79e-db07aaaa8285",
  "Giann Carlos": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMGiann.mp3?alt=media&token=51f5a756-8715-4356-be5d-b1199cd70dc1",
  "Mariano Campuzano": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMDaniel.mp3?alt=media&token=7d8f0c1d-43a4-4086-ab3e-8277f612ca65",
  "Maylo Villalobos": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMDaniel.mp3?alt=media&token=7d8f0c1d-43a4-4086-ab3e-8277f612ca65",
  
  // Mesa 3 - Ricardo (orden correcto: Samanta Rous, Guadalupe Gonzalez, Heiner Ramirez, Leomelly Alvarez, Amelia Huaman, Matias Guerrero)
  "Samanta Rous": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMsamanta.mp3?alt=media&token=5d0212d0-6abc-4359-8a34-3aec8e3dc701",
  "Guadalupe Gonzalez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMguada.mp3?alt=media&token=c2f7f9df-1aa4-4b2d-8d22-a3afb7197168",
  "Heiner Ramirez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMHeiner.mp3?alt=media&token=5ec72712-e71b-4b1e-8d00-d931a60a2a6c",
  "Leomelly Alvarez": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMLeomelly.mp3?alt=media&token=30e04aec-391b-4ec7-b383-4eceb6f24897",
  "Amelia Huaman": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMamelia.mp3?alt=media&token=b9cc55b6-870e-4fe4-ad4d-763e81e7796b",
  "Matias Guerrero": "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Canciones%2FMDaniel.mp3?alt=media&token=7d8f0c1d-43a4-4086-ab3e-8277f612ca65",
};

// Canci贸n por defecto si no se encuentra la del agente
const DEFAULT_CELEBRATION_SONG = "https://assets.mixkit.co/active_storage/sfx/1934/1934-preview.mp3";

export const TEAM_ICONS = [
  "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Nico.png?alt=media&token=94373b1a-eafb-418b-8bd2-5973a298adcc",
  "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Enzo.png?alt=media&token=e149ac46-f387-4408-97f9-29edc42e469e",
  "https://firebasestorage.googleapis.com/v0/b/verdeando-3baf2.appspot.com/o/Generated%20Image%20December%2018%2C%202025%20-%205_22PM.png?alt=media&token=29e91801-e0af-463e-ac41-6fb388c53e65"
];

export interface TeamTheme {
  bg: string;
  shadow: string;
  border: string;
  barColor: string;
}

export const TEAM_THEMES: TeamTheme[] = [
  { 
    bg: "bg-gradient-to-b from-fuchsia-500 to-purple-600", 
    shadow: "shadow-purple-500/40", 
    border: "border-purple-400", 
    barColor: "bg-fuchsia-400" 
  },
  { 
    bg: "bg-gradient-to-b from-cyan-400 to-blue-600", 
    shadow: "shadow-blue-500/40", 
    border: "border-cyan-400", 
    barColor: "bg-cyan-400" 
  },
  { 
    bg: "bg-gradient-to-b from-orange-400 to-red-500", 
    shadow: "shadow-orange-500/40", 
    border: "border-orange-400", 
    barColor: "bg-orange-400" 
  }
];

// ========== HELPERS ==========

// Helper para obtener foto del agente con fallback
// Si hay una ruta local en el c贸digo (AGENT_PHOTOS), siempre la usa primero
// Luego busca en localStorage (configuraci贸n din谩mica), y finalmente fallback
export const getAgentPhoto = (agentName: string, fallbackAvatar: string): string => {
  // PRIORIDAD 1: Si hay una ruta local definida en el c贸digo, usarla siempre
  const defaultPhoto = AGENT_PHOTOS[agentName];
  if (defaultPhoto && defaultPhoto.startsWith('/imagenes/')) {
    // Codificar espacios y otros caracteres especiales en la URL
    const encodedPath = defaultPhoto.replace(/ /g, '%20');
    return encodedPath;
  }
  
  // PRIORIDAD 2: Intentar obtener de localStorage (configuraci贸n din谩mica)
  // Solo si NO hay ruta local en el c贸digo
  try {
    const stored = localStorage.getItem("agent_configs");
    if (stored) {
      const configs = JSON.parse(stored);
      // Solo usar foto de localStorage si existe y no est谩 vac铆a
      if (configs[agentName]?.photo && configs[agentName].photo.trim() !== "") {
        return configs[agentName].photo;
      }
    }
  } catch {
    // Si falla, continuar con valores por defecto
  }
  
  // PRIORIDAD 3: Usar valores por defecto del c贸digo (URLs externas) o fallback
  return defaultPhoto || fallbackAvatar;
};

// Helper para obtener tema por 铆ndice (con ciclo autom谩tico)
export const getTeamTheme = (index: number): TeamTheme => {
  return TEAM_THEMES[index % TEAM_THEMES.length];
};

// Helper para obtener 铆cono de equipo
// Primero busca en configuraci贸n din谩mica, luego en valores por defecto
export const getTeamIcon = (index: number): string => {
  // Intentar obtener de localStorage (configuraci贸n din谩mica)
  try {
    const stored = localStorage.getItem("team_icons");
    if (stored) {
      const icons = JSON.parse(stored);
      if (icons.length > 0 && icons[index]) {
        return icons[index];
      }
    }
  } catch {
    // Si falla, continuar con valores por defecto
  }
  
  // Usar valores por defecto
  return TEAM_ICONS[index % TEAM_ICONS.length];
};

//  Helper para obtener la canci贸n de celebraci贸n del agente
// Primero busca en configuraci贸n din谩mica, luego en valores por defecto
export const getAgentCelebrationSong = (agentName: string): string => {
  // Intentar obtener de localStorage (configuraci贸n din谩mica)
  try {
    const stored = localStorage.getItem("agent_configs");
    if (stored) {
      const configs = JSON.parse(stored);
      if (configs[agentName]?.song && configs[agentName].song.trim() !== "") {
        return configs[agentName].song;
      }
    }
  } catch {
    // Si falla, continuar con valores por defecto
  }
  
  // Usar valores por defecto
  return AGENT_CELEBRATION_SONGS[agentName] || DEFAULT_CELEBRATION_SONG;
};